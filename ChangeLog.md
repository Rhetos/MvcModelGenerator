# MvcModelGenerator release notes

## 5.0.0 (2022-03-25)

### Breaking changes

* Migrated from .NET Framework to .NET 5 and Rhetos 5.
* MvcModelGenerator no longer compiles Rhetos.Mvc.dll and Captions.dll, it only generates the source files.
  If an existing MVC application referenced the generated DLL files,
  modify it to use source files directly (see Options A below),
  or build DLL files separately (Options B).

### Option A: Include source files

1. Open MVC application project in Visual Studio and add the generates source files
   [as link](https://andrewlock.net/including-linked-files-from-outside-the-project-directory-in-asp-net-core/):
   Captions.resx and Rhetos.Mvc.cs.
   The files generated by the package Rhetos.Mvc.ModelGenerator are located in the `obj\Rhetos\RhetosAssets` folder.
2. For Captions.resx enable automatically generated Captions.Designer.cs file, see [instructions](https://stackoverflow.com/a/14153997/2086516).
3. In your Rhetos application add a custom Rhetos plugin that modifies the generated MVC model namespace to match your MVC application.
   Replace "MyMvcApplicationNamespace" in the code snippet to match the namespace from Captions.Designer.cs.
   ```cs
   [Export(typeof(IMvcModelGeneratorPlugin))]
   [ExportMetadata(MefProvider.Implements, typeof(InitializationConcept))]
   [ExportMetadata(MefProvider.DependsOn, typeof(MvcModelInitialCodeGenerator))]
   public class MvcModelCaptionsType : IMvcModelGeneratorPlugin
   {
       public void GenerateCode(IConceptInfo conceptInfo, ICodeBuilder codeBuilder)
       {
           codeBuilder.InsertCode("MyMvcApplicationNamespace.Captions; //", MvcModelInitialCodeGenerator.OverrideCaptionsResourceClassTag);
       }
   }
   ```

### Option B: Build DLL files

1. In Visual studio create a class library project with the name **Captions** that should target at least .NET Standard 2.0.
2. Open the **Captions.csproj** file and the add following code:
   ```xml
   <ItemGroup>
       <Compile Include="path to generated Captions.cs" Link="Captions.cs" />
   </ItemGroup>

   <ItemGroup>
       <EmbeddedResource Include="path to generated Captions.resources" Link="Captions.resources" LogicalName="Captions.resources" />
   </ItemGroup>
   ```
   The files generated by the package Rhetos.Mvc.ModelGenerator are located in the `obj\Rhetos\RhetosAssets` folder.
3. Create another project with the name **Rhetos.Mvc** that should target at least .NET Standard 2.0. In this project add the reference to the **Captions** project and to the nuget package **Rhetos.Mvc.Client 3.2.0**.
4. In the **Rhetos.Mvc** project add:
   ```xml
   <ItemGroup>
       <Compile Include="path to generated Rhetos.Mvc.cs" Link="Rhetos.Mvc.cs" />
   </ItemGroup>
   ```
5. Building the solution should generate the **Captions.dll** and **Rhetos.Mvc.dll** assemblies

## 3.1.0 (2020-10-19)

* Build optimization: Sorting entries in Captions.resx file to avoid unnecessary rebuilds of Captions.dll and Rhetos.Mvc.dll.

## 3.0.0 (2020-09-23)

* Upgrade to Rhetos 4.0.
* Build optimization: Caching of resources to avoid recompilation of unchanged captions.

## 2.5.0 (2020-05-14)

* Support for Rhetos 4.0: New interface for generating 'assets' assembly files that are not part of the main application.

## 2.4.0 (2019-09-16)

## Internal improvements

* Bugfix: Deployment on Rhetos v3 fails with FileNotFoundException: Could not find file 'C:\My Projects\Rhetos\Source\Rhetos\bin\System.dll'.

## 2.3.0 (2019-09-09)

### New features

* New DSL concept: **ImplementInMvcModel**, for implementing an interface in the generated MVC model class.
  See [Readme.md](Readme.md) for details.
